{
  "$schema": "./schemas/platforms-v1.json",

  // Global flows that apply to all platforms
  "global": {
    "description": "Universal flows applied across all platforms",
    "flows": [
      {
        "from": "AGENTS.md",
        "to": "{rootFile}",
        "when": { "exists": "{rootFile}" }
      }
    ]
  },

  // Platform definitions for all supported AI coding platforms
  // Each platform defines its flows for transforming universal package format to platform-specific format

  "antigravity": {
    "name": "Google Antigravity",
    "rootDir": ".agent",
    "description": "Google's AI coding agent platform",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".agent/rules/{name}.md"
      },
      {
        "from": "commands/{name}.md",
        "to": ".agent/workflows/{name}.md"
      }
    ]
  },

  "augment": {
    "name": "Augment Code",
    "rootDir": ".augment",
    "description": "Augment AI code assistant",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".augment/rules/{name}.md"
      },
      {
        "from": "commands/{name}.md",
        "to": ".augment/commands/{name}.md"
      }
    ]
  },

  "claude": {
    "name": "Claude Code",
    "rootDir": ".claude",
    "rootFile": "CLAUDE.md",
    "aliases": ["claudecode"],
    "description": "Anthropic Claude coding assistant with agents and skills",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".claude/rules/{name}.md"
      },
      {
        "from": "commands/{name}.md",
        "to": ".claude/commands/{name}.md"
      },
      {
        "from": "agents/{name}.md",
        "to": ".claude/agents/{name}.md"
      },
      {
        "from": "skills/{name}",
        "to": ".claude/skills/{name}"
      }
    ]
  },

  "codex": {
    "name": "Codex CLI",
    "rootDir": ".codex",
    "rootFile": "AGENTS.md",
    "aliases": ["codexcli"],
    "description": "Codex command-line AI assistant",
    "flows": [
      {
        "from": "commands/{name}.md",
        "to": ".codex/prompts/{name}.md"
      }
    ]
  },

  "cursor": {
    "name": "Cursor",
    "rootDir": ".cursor",
    "rootFile": "AGENTS.md",
    "description": "Cursor AI code editor with rules, commands, and MCP support",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".cursor/rules/{name}.mdc"
      },
      {
        "from": "commands/{name}.md",
        "to": ".cursor/commands/{name}.md"
      },
      {
        "from": "settings.json",
        "to": ".cursor/settings.json",
        "merge": "deep"
      },
      {
        "from": "mcp.jsonc",
        "to": ".cursor/mcp.json",
        "pipe": ["filter-comments"],
        "merge": "deep"
      }
    ]
  },

  "factory": {
    "name": "Factory AI",
    "rootDir": ".factory",
    "rootFile": "AGENTS.md",
    "description": "Factory AI with commands and droids (agents)",
    "flows": [
      {
        "from": "commands/{name}.md",
        "to": ".factory/commands/{name}.md"
      },
      {
        "from": "agents/{name}.md",
        "to": ".factory/droids/{name}.md"
      }
    ]
  },

  "kilo": {
    "name": "Kilo Code",
    "rootDir": ".kilocode",
    "rootFile": "AGENTS.md",
    "aliases": ["kilocode"],
    "description": "Kilo coding assistant with rules and workflows",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".kilocode/rules/{name}.md"
      },
      {
        "from": "commands/{name}.md",
        "to": ".kilocode/workflows/{name}.md"
      }
    ]
  },

  "kiro": {
    "name": "Kiro",
    "rootDir": ".kiro",
    "description": "Kiro AI assistant with steering files",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".kiro/steering/{name}.md"
      }
    ]
  },

  "opencode": {
    "name": "OpenCode",
    "rootDir": ".opencode",
    "rootFile": "AGENTS.md",
    "description": "OpenCode AI assistant with commands and agents",
    "flows": [
      {
        "from": "commands/{name}.md",
        "to": ".opencode/command/{name}.md"
      },
      {
        "from": "agents/{name}.md",
        "to": ".opencode/agent/{name}.md"
      },
      {
        "from": "mcp.jsonc",
        "to": ".opencode/mcp.json",
        "pipe": ["filter-comments"],
        "merge": "deep"
      }
    ]
  },

  "qwen": {
    "name": "Qwen Code",
    "rootDir": ".qwen",
    "rootFile": "QWEN.md",
    "aliases": ["qwencode"],
    "description": "Qwen AI coding assistant with agent support",
    "flows": [
      {
        "from": "agents/{name}.md",
        "to": ".qwen/agents/{name}.md"
      }
    ]
  },

  "roo": {
    "name": "Roo Code",
    "rootDir": ".roo",
    "rootFile": "AGENTS.md",
    "description": "Roo AI assistant with command support",
    "flows": [
      {
        "from": "commands/{name}.md",
        "to": ".roo/commands/{name}.md"
      }
    ]
  },

  "warp": {
    "name": "Warp",
    "rootDir": ".warp",
    "rootFile": "WARP.md",
    "description": "Warp terminal with AI features"
  },

  "windsurf": {
    "name": "Windsurf",
    "rootDir": ".windsurf",
    "description": "Windsurf AI assistant with rules",
    "flows": [
      {
        "from": "rules/{name}.md",
        "to": ".windsurf/rules/{name}.md"
      }
    ]
  }
}
